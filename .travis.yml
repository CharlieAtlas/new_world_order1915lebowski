language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: Hzs5wtTOvJESRKHoEK08fm/VF1neYp1R11HH7cq7RXYaC1aN6vhT23RlhF+uB0flhbMZH1P4EBEiFYukyqD5+L7I+rMuwPzT3rmIlnTS5P9CqJ4ds89mkvk3yEAQHKBpI5SgjuaLN6Px+bFciGw4AM0cARwIatvW+dr7dnl0uDqQMZ6wxBPRdh8nA+++vDUm35KMc+21+0PH1wnw0tf5DXe8Cbn6Y6MElotQyt20gG49RThalQmqA15DbeqZwYPVC+3VXxiXHGq3C8Y5ZDfkE98IbiFIXqkQu+m1DVorXczXAsM6B9vUGMGIePDs2fw/mtjrECKxm1CXVbw5ROGXJDqyJj9W6nrCmB64F6mvfIkS9Js7w5hWySFgMj9PbXJK+Yv/gkQPRALpmJpK/Cy97Yc1VP8XRJ7af68T+V17x9ddgmsFjRIsUd7HO2YiAb9gJ7jJmgICkpGAdaYioW3YRjC1lmSt8jaGe/jE8JB6Op1QvUJXKifR5iKGw7folFrcn1+mFupTwbVFICvUMpZxHVP907Snya+9N0RLE+ZZI3la2P/YzrHr5h5gJ67lPYJTuMb7pVNZlsVxtElPYNYAgXVWtD2BVVhihHKrV+RUsK1V+vIsL3H1m53ytnW+pRs+5C9rUZOjQgFqDXyewOU+QSQh/oh/r99fSpOwbUDq+4M=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
